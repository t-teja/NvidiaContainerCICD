trigger:
  branches:
    include:
      - main  # run pipeline when main branch changes

pool:
  name: Orin-Agents   # use your self-hosted ARM64 agent pool

jobs:
- job: BuildDocker
  displayName: Build Docker Container
  steps:
  - checkout: self    # get code from GitHub

  - script: |
     
      echo "Building Docker container..."
      docker compose build
    displayName: 'Build Docker container using docker compose'

  - script: |
      echo "Stopping any existing containers-teja"
      docker compose down 
      echo "Running container for test..."
      docker compose up -d
      displayName: 'Start container for verification'

  - script: |
      echo "Listing running containers..."
      docker ps
    displayName: 'Verify container is running'
